#!/usr/bin/env tsx

import { GraphQLClient } from 'graphql-request';

const KEYSTONE_SESSION = 'Fe26.2**f01b43b5a809c74981b635dc8690e89b725b1dafc82b9001b4cd2986d18b446a*jR97gvVwTXthvz8BKLVUwg*11ecm4NkfrXx7ke9ttZ97Vb_jkdq6ILQD_sf0J_Mh1EUZ_Jfvp4Ntx15ONkHn2qFRgZ2u9v8v91H1zpjxdJJSg*1781930136593*1ac5010e49cc94bea22c3e2c01bd4b0c79ab48e39dad7b0f3819b2153a4823aa*R1uGMlKaUxHp8cLTsMSuKS5URMauAhe-cKr9KEq3-Aw';

const client = new GraphQLClient('http://localhost:3003/api/graphql', {
  headers: {
    'authorization': `Bearer ${KEYSTONE_SESSION}`,
    'cookie': `keystonejs-session=${KEYSTONE_SESSION}`
  }
});

// Simple Icons SVGs - these are the actual SVGs from simple-icons repo
const logoUpdates = [
  {
    name: 'WooCommerce',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#96588A"><title>WooCommerce</title><path d="M23.861 2.458c.142.417.166.916.069 1.445L20.407 19.37c-.074.405-.23.788-.454 1.119-.28.414-.651.74-1.081.948-.405.195-.859.299-1.323.299-1.136 0-2.196-.616-2.777-1.572-.35-.576-.514-1.251-.487-1.934a4.33 4.33 0 0 1 .34-1.513l2.542-8.804c.153-.525.185-1.068.093-1.588-.092-.52-.335-.999-.711-1.402A2.926 2.926 0 0 0 14.44 4c-.81 0-1.57.33-2.125.923-.555.592-.862 1.37-.862 2.177 0 .506.109.998.316 1.447l2.542 8.804c.23.794.266 1.626.105 2.429-.16.803-.526 1.556-1.066 2.195-.27.32-.586.6-.938.831-.352.23-.74.413-1.152.541-.412.128-.844.2-1.284.213-.44.013-.883-.027-1.314-.119-.862-.184-1.651-.617-2.257-1.237-.605-.62-1.027-1.427-1.206-2.307A5.78 5.78 0 0 1 4.88 17.4l3.464-12.012C8.537 4.854 8.683 4.36 8.93 3.92c.247-.44.576-.826.97-1.137.394-.31.852-.546 1.345-.692.493-.146 1.016-.2 1.537-.159.521.041 1.032.184 1.5.42.468.237.89.565 1.243.967.353.402.63.872.815 1.382.185.51.276 1.05.267 1.593a5.39 5.39 0 0 1-.243 1.555L13.822 16.65c-.092.32-.119.656-.077.987.042.33.156.645.334.922.178.277.413.511.689.686.276.175.589.286.916.325.327.039.657.006.967-.097.31-.103.594-.268.832-.482.238-.214.425-.473.55-.761.125-.288.186-.601.178-.917a3.36 3.36 0 0 0-.194-.965L15.476 7.543c-.23-.794-.266-1.626-.105-2.429.16-.803.526-1.556 1.066-2.195C16.978 2.329 17.735 1.85 18.6 1.65c.865-.2 1.772-.125 2.587.214.815.339 1.538.93 2.059 1.684.521.754.84 1.67.865 2.61.025.94-.23 1.871-.714 2.653l-3.464 12.012c-.192.665-.338 1.159-.585 1.599-.247.44-.576.826-.97 1.137-.394.31-.852.546-1.345.692-.493.146-1.016.2-1.537.159-.521-.041-1.032-.184-1.5-.42-.468-.237-.89-.565-1.243-.967-.353-.402-.63-.872-.815-1.382-.185-.51-.276-1.05-.267-1.593a5.39 5.39 0 0 1 .243-1.555L14.467 7.35c.092-.32.119-.656.077-.987-.042-.33-.156-.645-.334-.922-.178-.277-.413-.511-.689-.686-.276-.175-.589-.286-.916-.325-.327-.039-.657-.006-.967.097-.31.103-.594.268-.832.482-.238.214-.425.473-.55.761-.125.288-.186.601-.178.917.008.316.074.626.194.965L12.813 16.457c.23.794.266 1.626.105 2.429-.16.803-.526 1.556-1.066 2.195-.54.639-1.297 1.118-2.162 1.318-.865.2-1.772.125-2.587-.214-.815-.339-1.538-.93-2.059-1.684-.521-.754-.84-1.67-.865-2.61-.025-.94.23-1.871.714-2.653L8.357 3.226c.192-.665.338-1.159.585-1.599.247-.44.576-.826.97-1.137.394-.31.852-.546 1.345-.692.493-.146 1.016-.2 1.537-.159.521.041 1.032.184 1.5.42.468.237.89.565 1.243.967.353.402.63.872.815 1.382.185.51.276 1.05.267 1.593a5.39 5.39 0 0 1-.243 1.555L11.913 16.65c-.092.32-.119.656-.077.987.042.33.156.645.334.922.178.277.413.511.689.686.276.175.589.286.916.325.327.039.657.006.967-.097.31-.103.594-.268.832-.482.238-.214.425-.473.55-.761.125-.288.186-.601.178-.917a3.36 3.36 0 0 0-.194-.965L13.667 7.543c-.23-.794-.266-1.626-.105-2.429.16-.803.526-1.556 1.066-2.195.54-.639 1.297-1.118 2.162-1.318.865-.2 1.772-.125 2.587.214.815.339 1.538.93 2.059 1.684.521.754.84 1.67.865 2.61.025.94-.23 1.871-.714 2.653l-3.464 12.012c-.192.665-.338 1.159-.585 1.599-.247.44-.576.826-.97 1.137-.394.31-.852.546-1.345.692-.493.146-1.016.2-1.537.159-.521-.041-1.032-.184-1.5-.42-.468-.237-.89-.565-1.243-.967-.353-.402-.63-.872-.815-1.382-.185-.51-.276-1.05-.267-1.593a5.39 5.39 0 0 1 .243-1.555z"/></svg>`
  },
  {
    name: 'PrestaShop',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#DF0067"><title>PrestaShop</title><path d="M15.538 9.062h-2.636v1.25h2.636v1.25h-2.636v1.25h2.636v1.25h-4.136V7.812h4.136v1.25zm-5.616 3.376h-1.25v1.25h1.25v1.25H7.436V7.812h2.486c1.377 0 2.486.559 2.486 1.93v.766c0 1.372-1.109 1.93-2.486 1.93zm0-2.542H8.686v1.292h1.236c.502 0 .756-.2.756-.646v-.766c0-.446-.254-.646-.756-.646v.766zm8.578-4.146c-5.692 0-10.31 4.618-10.31 10.31S12.808 26.37 18.5 26.37s10.31-4.618 10.31-10.31S24.192 5.75 18.5 5.75zm0 19.12c-4.861 0-8.81-3.949-8.81-8.81s3.949-8.81 8.81-8.81 8.81 3.949 8.81 8.81-3.949 8.81-8.81 8.81z"/></svg>`
  },
  {
    name: 'Medusa',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#7C3AED"><title>Medusa</title><path d="M12 1.5C6.201 1.5 1.5 6.201 1.5 12S6.201 22.5 12 22.5 22.5 17.799 22.5 12 17.799 1.5 12 1.5zm0 2c4.699 0 8.5 3.801 8.5 8.5S16.699 20.5 12 20.5 3.5 16.699 3.5 12 7.301 3.5 12 3.5zm-3.5 5.5a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zm7 0a1.5 1.5 0 1 1 0 3 1.5 1.5 0 0 1 0-3zM12 13c1.5 0 2.8.8 3.5 2H8.5c.7-1.2 2-2 3.5-2z"/></svg>`
  },
  {
    name: 'Saleor',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#06B6D4"><title>Saleor</title><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2.4c5.302 0 9.6 4.298 9.6 9.6s-4.298 9.6-9.6 9.6S2.4 17.302 2.4 12 6.698 2.4 12 2.4zm-1.8 4.8v9.6h3.6V7.2h-3.6z"/></svg>`
  },
  {
    name: 'Sylius',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#1ABC9C"><title>Sylius</title><path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 2c5.523 0 10 4.477 10 10s-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2zm-3 4v12h6V6H9z"/></svg>`
  },
  {
    name: 'Vue Storefront',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#4FC08D"><title>Vue.js</title><path d="M14.584 0l-2.592 4.416L9.408 0H.012l11.988 20.814L24 0h-9.416zm-2.592 6.932L6.624 0H2.556l9.408 16.356L21.372 0h-4.056l-5.324 6.932z"/></svg>`
  },
  {
    name: 'Bagisto',
    svg: `<svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" fill="#FF6B35"><title>Laravel</title><path d="M23.642 5.43a.364.364 0 01.014.1v5.149c0 .135-.073.26-.189.326l-4.323 2.49v4.934a.378.378 0 01-.188.326L9.93 23.949a.316.316 0 01-.066.027c-.008.002-.016.008-.024.01a.348.348 0 01-.192 0c-.011-.002-.02-.008-.03-.012-.02-.008-.042-.014-.062-.025L.533 18.755a.376.376 0 01-.189-.326V2.974c0-.033.005-.066.014-.098.003-.012.01-.02.014-.032a.369.369 0 01.023-.058c.004-.013.015-.022.023-.033l.033-.045c.012-.01.025-.018.037-.027.014-.012.027-.024.041-.034H.53L5.043.05a.375.375 0 01.375 0L9.93 2.647h.002c.015.01.027.021.04.033l.038.027c.013.014.02.03.033.045.008.011.02.021.025.033.01.02.017.038.024.058.003.011.01.021.013.032.01.031.014.064.014.098v9.652l3.76-2.164V5.527c0-.033.004-.066.013-.098.003-.01.01-.02.013-.032a.487.487 0 01.024-.059c.007-.012.018-.02.025-.033.012-.015.021-.03.033-.043.012-.012.025-.02.037-.027.014-.013.031-.024.045-.034h.001l4.513-2.598a.375.375 0 01.375 0l4.513 2.598c.016.01.031.021.046.034.012.007.025.015.037.027.012.013.021.028.033.043.007.013.018.021.025.033.01.02.017.038.024.059.003.011.01.021.013.032.009.032.013.065.013.098zm-1.07 5.018v-3.49L19.843 8.45v3.49l2.729-1.493zm-4.5 2.599v-3.49l-4.309 2.5v3.49l4.309-2.5zM2.262 4.047v13.565l8.258 4.77v-3.49l-4.309-2.5a.378.378 0 01-.188-.326V8.45l-3.761-2.164v-2.24zm1.5-2.599L5.043 2.74 6.324 3.449l-1.281.74-1.281-.74zm6.324 8.103l-3.76 2.164v8.103l3.76-2.164V9.551zm7.012-5.103L19.843 5.74l1.281.74-1.281.74-1.281-.74zm1.5 2.599v8.103l3.76-2.164V6.449l-3.76 2.164z"/></svg>`
  }
];

async function updateLogos() {
  console.log('üé® Updating logos with Simple Icons SVGs...\n');

  for (const logoUpdate of logoUpdates) {
    try {
      // First get the tool ID
      const getToolQuery = `
        query GetTool($name: String!) {
          tools(where: { name: { equals: $name } }) {
            id
            name
          }
        }
      `;

      const toolResult = await client.request(getToolQuery, { name: logoUpdate.name });
      const tool = toolResult.tools[0];

      if (!tool) {
        console.log(`‚ùå Tool not found: ${logoUpdate.name}`);
        continue;
      }

      // Update the logo
      const updateMutation = `
        mutation UpdateToolLogo($id: ID!, $data: ToolUpdateInput!) {
          updateTool(where: { id: $id }, data: $data) {
            id
            name
            logoSvg
          }
        }
      `;

      const result = await client.request(updateMutation, {
        id: tool.id,
        data: { logoSvg: logoUpdate.svg }
      });

      console.log(`‚úÖ Updated ${logoUpdate.name} logo`);
    } catch (error) {
      console.error(`‚ùå Failed to update ${logoUpdate.name}:`, error);
    }
  }

  console.log('\nüéâ Logo updates completed!');
}

main().catch(console.error);

async function main() {
  await updateLogos();
}